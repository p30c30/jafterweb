/* === MODAL + bottom sheet + fullscreen (v18) === */
.modal{ display:none; position:fixed; inset:0; width:100%; height:100vh; height:100dvh; background:rgba(0,0,0,.98); z-index:1000; overflow:hidden; cursor:pointer; overscroll-behavior:contain; }
.modal.active{ display:block; }
.modal-content{ display:flex; flex-direction:column; justify-content:center; align-items:center; min-height:100vh; min-height:100dvh; padding:25px; padding-bottom:120px; cursor:default; }

/* Imagen */
.modal-img-container{ position:relative; display:flex; justify-content:center; align-items:center; max-width:100%; max-height:85vh; flex:1; cursor:default; }
.modal-img{
  max-width:96vw; max-height:85vh; width:auto; height:auto; object-fit:contain; display:block; border-radius:8px;
  box-shadow:0 20px 50px rgba(0,0,0,.8); transition: transform .2s ease; transform-origin:center center; touch-action:none; user-select:none; -webkit-user-drag:none; will-change:transform;
}
.modal-img.zoomed{ cursor:move; }
.modal-img.grabbing{ cursor:grabbing !important; }

/* Botón [ ] dentro de la imagen (móvil) */
.fullscreen-toggle{
  position:absolute; right:10px; bottom:10px; width:42px; height:42px; border-radius:50%; background:rgba(0,0,0,.6);
  border:2px solid rgba(253,184,19,.6); color:#FDB813; display:none; align-items:center; justify-content:center;
  z-index:1004; box-shadow:0 6px 20px rgba(0,0,0,.5); transition:transform .15s, background .2s, box-shadow .2s, opacity .2s;
}
.fullscreen-toggle svg{ width:22px; height:22px; pointer-events:none; }
.fullscreen-toggle:hover{ background:rgba(253,184,19,.85); color:#000; box-shadow:0 0 16px rgba(253,184,19,.35); transform:scale(1.06); }
.fullscreen-toggle:active{ transform:scale(.98); }
@media (max-width:1024px){ .fullscreen-toggle{ display:flex; } }
.fullscreen-toggle .ico-exit{ display:none; }
.fullscreen-toggle.is-active .ico-enter{ display:none; }
.fullscreen-toggle.is-active .ico-exit{ display:inline; }

/* Fallback pseudo-fullscreen */
.modal.fs-active{ --info-height:0dvh; }
.modal.fs-active .modal-info{ display:none !important; }

/* Info (desktop flotante) */
.modal-info{
  text-align:center; padding:1.2rem; background:rgba(0,0,0,.95); border-radius:10px; backdrop-filter: blur(20px);
  border:1px solid rgba(253,184,19,.4); z-index:1002; position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
  width:auto; min-width:300px; max-width:90%; transition: opacity .25s, transform .25s; opacity:1;
}
.modal.is-zoomed .modal-info{ opacity:0 !important; visibility:hidden !important; pointer-events:none !important; transform:translateX(-50%) translateY(10px); }
.modal.is-gesturing .modal-info{ opacity:0 !important; pointer-events:none !important; }

.modal-title{ display:none !important; }
.foto-counter{ color:#FDB813; font-size:1rem; font-weight:bold; margin-bottom:.5rem; text-shadow:0 1px 2px rgba(0,0,0,.8); }
.foto-title{ color:#fff; font-size:1.1rem; line-height:1.4; font-weight:500; text-shadow:0 1px 3px rgba(0,0,0,.8); max-width:100%; word-wrap:break-word; margin:0; }

/* Chip */
.section-chip{
  margin-top:.75rem; display:inline-flex; align-items:center; gap:.5rem; padding:8px 14px; border-radius:999px;
  background:rgba(253,184,19,.15); border:1px solid rgba(253,184,19,.6); color:#FDB813; font-weight:600; cursor:pointer; text-decoration:none; transition: transform .15s, box-shadow .2s, background .2s;
}
.section-chip:hover{ background:rgba(253,184,19,.3); box-shadow:0 0 12px rgba(253,184,19,.3); transform:translateY(-1px); }
.section-chip:active{ transform:translateY(0); box-shadow:none; }
.section-chip:focus-visible{ outline:2px solid #FDB813; outline-offset:3px; box-shadow:0 0 0 4px rgba(253,184,19,.25); }
.section-chip .chip-arrow{ font-weight:700; }

/* Navegación (escritorio) */
.nav-button{
  position:fixed; top:50%; transform:translateY(-50%); width:65px; height:65px;
  background:rgba(0,0,0,.7); color:#FDB813; border:3px solid rgba(253,184,19,.7); border-radius:50%;
  display:flex; justify-content:center; align-items:center; font-size:2.2rem; font-weight:bold; cursor:pointer; z-index:1002;
  transition:all .3s; opacity:.8; user-select:none;
}
.nav-button:hover{ background:rgba(253,184,19,.95); color:#000; opacity:1; transform:translateY(-50%) scale(1.12); box-shadow:0 0 20px rgba(253,184,19,.5); }
.prev-button{ left:25px; } .next-button{ right:25px; }

/* Cerrar */
.close-modal{
  position:fixed; top:20px; right:20px; color:rgba(253,184,19,.8); font-size:22px; font-weight:bold; cursor:pointer; background:rgba(0,0,0,.5);
  border:2px solid rgba(253,184,19,.5); border-radius:50%; width:38px; height:38px; display:flex; align-items:center; justify-content:center; z-index:1003; transition:all .3s; opacity:.8;
}
.close-modal:hover{ background:rgba(253,184,19,.9); color:#000; transform:scale(1.15); opacity:1; box-shadow:0 0 12px rgba(253,184,19,.4); }

/* Body sin scroll con modal */
body.modal-open{ overflow:hidden; }

/* Móvil: bottom sheet */
@media (max-width:1024px){
  .modal{ height:100vh; height:100dvh; --info-height:26dvh; }
  .modal-content{ flex-direction:column; justify-content:flex-start; align-items:center; padding:0 !important; height:100vh; height:100dvh; overflow:hidden; }
  .modal-img-container{ width:100%; height:calc(100dvh - var(--info-height)); max-height:calc(100dvh - var(--info-height)); display:flex; align-items:center; justify-content:center; flex-shrink:0; transition:height .2s; }
  .modal-img{ max-width:100%; max-height:100%; width:auto; height:auto; }
  .modal-info{
    position:relative !important; bottom:auto !important; left:auto !important; transform:none !important;
    width:100% !important; height:var(--info-height); max-height:75dvh; border-radius:10px 10px 0 0 !important; border:none !important; border-top:1px solid rgba(253,184,19,.3) !important;
    margin:0 !important; flex-shrink:0; overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:contain; transition:height .2s, opacity .2s, transform .2s; padding-top:.6rem; padding-bottom:1rem;
  }
  .nav-button{ display:none !important; }
  .close-modal{ top:10px; right:10px; background:rgba(0,0,0,.7); width:35px; height:35px; font-size:18px; }
  .modal.is-zoomed{ --info-height:0dvh; }
}

/* Landscape móvil */
@media (max-width:1024px) and (orientation:landscape){
  .modal{ --info-height:20dvh; }
  .modal-content{ flex-direction:column !important; justify-content:flex-start; align-items:center; padding:0 !important; height:100vh !important; height:100dvh !important; }
  .modal-img-container{ height:calc(100dvh - var(--info-height)) !important; max-height:calc(100dvh - var(--info-height)) !important; }
  .foto-title{ font-size:.95rem; line-height:1.35; }
}

/* Extra */
@media (max-width:480px){ .modal{ --info-height:30dvh; } .foto-title{ font-size:.9rem; } }
@media (min-width:1600px){ .modal-info{ max-width:70%; } }
@supports (padding:max(0px)){ .modal-info{ padding-bottom:max(1rem, env(safe-area-inset-bottom)); } }
